# 比特币技术点
非对称密码学、P2P网络、共识机制、智能脚本
# 比特币的核心技术区块链
# 目前的场景探索
* 使用区块链做存储
* 使用区块链做客户的账务
* 使用区块链保存电子资产

# 区块链分类
* 共有链
> 对参与的节点没有限制，整个系统运行在公网上，没有中央机构的控制，自由发展，自发组织，典型的案例就是比特币

* 私有链
> 顾名思义就是一个组织内部运行的区块链系统，这种系统运行在组织内，很难保证去中心化，在一个组织内本身就是个中心化的产物

* 联盟链

# 区块链技术中最核心的几个要点
> 包括：区块链存储、秘钥和地址、解锁脚本、挖矿过程、共识机制、P2P 网络等
## 区块链存储
通过分布式的区块链来记载比特币的拥有权和交易信息。

每个比特币的参与者都拥有一份相同的区块链副本，区块链包含着多个随着时间排序的块，后一个块通过哈希指针指向前一个块，形成一个链，从链的顶端通过这个指针，可以一直找到底端第一个块，第一个块成为创世纪块。

每个区块记录着前一个区块的哈希散列值，实际上是前一个节点头的哈希散列值，如果想改变一个区块包含的交易，必须改变这个区块之后所有的交易。

因此，一个区块一旦产生，并且被区块链的节点所接受，并且在这个节点之后又产生了一定数量的区块，那么这个区块基本是不可篡改的。

![图片](https://img-blog.csdn.net/20180504181005516)
由此可见，区块链是由多个区块组成，每个区块是由区块头和区块体组成的，每一个区块头包含着区块的元信息，同时也包含一个指向前一个区块头哈希值的指针，这个指针是防止区块链被篡改的关键信息。

区块体包含比特币的交易信息。
第一个交易是特殊交易，是奖励给挖矿节点的酬劳，这也是唯一一种可以产生比特币的方式，也就是发行比特币的方式。
其余的交易都是转账交易，比特币从一个地址支付给另外一个地址，这也是实现比特币价值转移的唯一方式。

总结来看，比特币只有发行和转账两种交易，比特币产生以后只能从一个人转账给另外一个人，而不能凭空消失，比特币发行的总量是有限的，一共2100万。

区块链实际上是比特币的账本，记录着谁拥有多少比特币，只不过这个账本是保存在互联网上的、分布式的，并不是由一个中心机构或者服务器来存储。

## 秘钥和地址
比特币的拥有者如何证明自己拥有比特币？
> 比特币的地址 和 比特币的秘钥

比特币的归属权是通过加密领域技术来实现的。

加密领域大体上经过了3个阶段，
* 第一个阶段拼算法，把加密逻辑写在一个非常高深的代码里。
* 对称秘钥加密，对称秘钥加密通过一个对称的秘钥进行加密数据，然后传输或者保存，需要的时候再通过同一个秘钥进行解密还原原来数据，缺点是秘钥是共享的，无法安全的保存秘钥，尤其是跨组织的场景。
* 非对称加密算法。
例如：RSA，非对称算法拥有一对秘钥，一个公钥和一个私钥，私钥可以推导出公钥，但是公钥不能推导出私钥，公钥加密的数据私钥可以解密，私钥加密的数据公钥可以解密。

在比特币系统里，我们通过秘钥来实现比特币的转账，实现价值的转移。

非对称加密还有另外一个场景，就是签名

## 解锁脚本
锁定和解锁脚本是通过逆波兰表示法的基于堆栈的脚本实现的

## 共识机制
比特币是通过工作量证明的共识机制来决定记账权的。
通俗来讲，谁证明了自己的工作量最大，谁就负责记账。

工作量证明示意图如下：
![图片](https://img-blog.csdn.net/20180504181339191)

工作量大小是通过计算符合某一个标准的比特币区块头的哈希散列值来体现的。

试图争夺记账权的节点称为挖矿节点.
挖矿节点会把网络节点上发来的交易进行验证,验证后会存入缓冲区，形成一定的交易存储结构（交易使用 Merkle 树存储），放在区块体中。

然后根据区块的基本信息构造区块头.
区块头通常包含前一个区块的哈希散列值、Merkle根、时间戳、难度目标、以及一个填充的随机值。

这里面的随机值是随机产生并且填充的，挖矿过程就是求出一个能够填充本区块头的随机值，让区块头的哈希散列值符合某一个标准。

## 挖矿过程

## 网络传播机制


~ end